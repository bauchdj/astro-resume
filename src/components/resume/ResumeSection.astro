---
import ResumeHeader from "./ResumeHeader.astro";

export interface Props<T> {
	title: string;
	items: T[];
	getDate: (item: T) => string;
	getOrganization: (item: T) => string;
	getPosition: (item: T) => string;
	getLocation: (item: T) => string;
	getResponsibilities?: (item: T) => string[];
	className?: string;
	itemClassName?: string;
}

const {
	title,
	items,
	getDate,
	getOrganization,
	getPosition,
	getLocation,
	getResponsibilities,
	className = "",
	itemClassName = "",
} = Astro.props;
---

<section class={`resume-section ${className}`}>
  <h2>{title}</h2>
  <hr />
  <div class={`${title.toLowerCase().replace(/\s+/g, '-')}-list`}>
    {items.map((item: any) => (
      <div class={`${title.toLowerCase().replace(/\s+/g, '-')}-item ${itemClassName}`}>
        <ResumeHeader 
          date={getDate(item)}
          organization={getOrganization(item)}
          position={getPosition(item)}
          location={getLocation(item)}
          className={`${title.toLowerCase().replace(/\s+/g, '-')}-header`}
        />
        {getResponsibilities && (
          <ul>
            {getResponsibilities(item).map((resp: unknown) => (
              <li>{resp}</li>
            ))}
          </ul>
        )}
      </div>
    ))}
  </div>
</section>

<!-- <ResumeStyles /> -->

<style>
  .resume-section {
    margin: 0;
  }

  h2 {
    font-weight: bold;
    margin: 0;
    font-size: 12pt;
  }

  hr {
    border: 0.5px solid #000;
    margin: 0;
  }

  .date {
    white-space: nowrap;
    padding-left: 6px;
  }

  .position-info {
    flex: 1;
  }

  .degree-info {
    flex: 1;
  }

  ul {
    margin: 0.25rem 0 0 0;
    padding-left: 20px;
  }

  li {
    margin: 0.15rem 0;
    line-height: 1.2;
  }

  .experience-header,
  .education-header,
  .volunteer-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
  }

  .experience-item,
  .education-item,
  .volunteer-item {
    margin-bottom: 0.4rem;
  }
</style>
