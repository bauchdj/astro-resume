---
import ResumeHeader from "./ResumeHeader.astro";
import ResumeSectionStyles from "./ResumeSectionStyles.astro";

export interface Props<T> {
	title: string;
	items: T[];
	getDate: (item: T) => string;
	getOrganization: (item: T) => string;
	getPosition: (item: T) => string;
	getLocation: (item: T) => string;
	getResponsibilities?: (item: T) => string[];
	className?: string;
	itemClassName?: string;
}

const {
	title,
	items,
	getDate,
	getOrganization,
	getPosition,
	getLocation,
	getResponsibilities,
	className = "",
	itemClassName = "",
} = Astro.props;
---

<section class={`resume-section ${className}`}>
  <h2>{title}</h2>
  <hr />
  <div class={`${title.toLowerCase().replace(/\s+/g, '-')}-list`}>
    {items.map((item: any) => (
      <div class={`${title.toLowerCase().replace(/\s+/g, '-')}-item ${itemClassName}`}>
        <ResumeHeader 
          date={getDate(item)}
          organization={getOrganization(item)}
          position={getPosition(item)}
          location={getLocation(item)}
          className={`${title.toLowerCase().replace(/\s+/g, '-')}-header`}
        />
        {getResponsibilities && (
          <ul>
            {getResponsibilities(item).map((resp: unknown) => (
              <li>{resp}</li>
            ))}
          </ul>
        )}
      </div>
    ))}
  </div>
</section>

<ResumeSectionStyles />
